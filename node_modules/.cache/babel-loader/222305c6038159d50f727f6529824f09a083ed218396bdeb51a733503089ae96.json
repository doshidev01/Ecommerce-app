{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\doshi\\\\Desktop\\\\InnoCaption\\\\ecommerce-app\\\\src\\\\context\\\\shop-context.js\",\n  _s = $RefreshSig$();\nimport React, { useState, createContext, useEffect } from 'react';\n\n// Creating ShopContext to manage global state\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ShopContext = /*#__PURE__*/createContext(null);\n\n// Function to get default cart items\nconst getDefaultCart = products => {\n  let cart = {};\n  products.forEach(product => {\n    cart[product.id] = 0;\n  });\n  return cart;\n};\n\n// ShopContextProvider component\nexport const ShopContextProvider = props => {\n  _s();\n  const [products, setProducts] = useState([]);\n\n  // Fetching products data from an API on component mount\n  useEffect(() => {\n    fetch('https://dummyjson.com/products').then(res => res.json()).then(data => {\n      setProducts(data.products);\n      setCartItems(getDefaultCart(data.products));\n    }).catch(error => console.error('Error fetching data:', error));\n  }, []);\n\n  // State to store cart items\n  const [cartItems, setCartItems] = useState(getDefaultCart(products));\n\n  // Function to calculate total cart amount\n  const getTotalCartAmount = () => {\n    let totalAmount = 0;\n    for (const item in cartItems) {\n      if (cartItems[item] > 0) {\n        let itemInfo = products.find(product => product.id === Number(item));\n        totalAmount += cartItems[item] * itemInfo.price;\n      }\n    }\n    return totalAmount;\n  };\n  const addToCart = ProdID => {\n    setCartItems(prevState => ({\n      ...prevState,\n      [ProdID]: prevState[ProdID] + 1\n    }));\n  };\n  const removeFromCart = ProdID => {\n    setCartItems(prevState => ({\n      ...prevState,\n      [ProdID]: Math.max(0, prevState[ProdID] - 1)\n    }));\n  };\n  const updateCartItemCount = (newAmount, itemID) => {\n    setCartItems(prevState => ({\n      ...prevState,\n      [itemID]: newAmount\n    }));\n  };\n  const contextValue = {\n    products,\n    cartItems,\n    addToCart,\n    removeFromCart,\n    updateCartItemCount,\n    getTotalCartAmount\n  };\n  return /*#__PURE__*/_jsxDEV(ShopContext.Provider, {\n    value: contextValue,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 10\n  }, this);\n};\n_s(ShopContextProvider, \"0eHEx/zeaciZtmMHfbPr5+sum9s=\");\n_c = ShopContextProvider;\nvar _c;\n$RefreshReg$(_c, \"ShopContextProvider\");","map":{"version":3,"names":["React","useState","createContext","useEffect","jsxDEV","_jsxDEV","ShopContext","getDefaultCart","products","cart","forEach","product","id","ShopContextProvider","props","_s","setProducts","fetch","then","res","json","data","setCartItems","catch","error","console","cartItems","getTotalCartAmount","totalAmount","item","itemInfo","find","Number","price","addToCart","ProdID","prevState","removeFromCart","Math","max","updateCartItemCount","newAmount","itemID","contextValue","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/doshi/Desktop/InnoCaption/ecommerce-app/src/context/shop-context.js"],"sourcesContent":["import React, { useState, createContext, useEffect } from 'react';\r\n\r\n// Creating ShopContext to manage global state\r\nexport const ShopContext = createContext(null);\r\n\r\n// Function to get default cart items\r\nconst getDefaultCart = (products) => {\r\n    let cart = {};\r\n    products.forEach(product => {\r\n        cart[product.id] = 0;\r\n    })\r\n    return cart;\r\n}\r\n\r\n// ShopContextProvider component\r\nexport const ShopContextProvider = (props) => {\r\n    const [products, setProducts] = useState([]);\r\n\r\n    // Fetching products data from an API on component mount\r\n    useEffect(() => {\r\n        fetch('https://dummyjson.com/products')\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                setProducts(data.products);\r\n                setCartItems(getDefaultCart(data.products));\r\n            })\r\n            .catch(error => console.error('Error fetching data:', error));\r\n    }, []);\r\n    \r\n    // State to store cart items\r\n    const [cartItems, setCartItems] = useState(getDefaultCart(products));\r\n\r\n    // Function to calculate total cart amount\r\n    const getTotalCartAmount = () => {\r\n        let totalAmount = 0;\r\n        for (const item in cartItems) {\r\n            if(cartItems[item] > 0) {\r\n                let itemInfo = products.find((product) => product.id === Number(item));\r\n                totalAmount += cartItems[item] * itemInfo.price;\r\n            }\r\n        }\r\n        return totalAmount;\r\n    }\r\n\r\n    \r\n    const addToCart = (ProdID) => {\r\n        setCartItems((prevState) => ({...prevState, [ProdID]: prevState[ProdID] + 1}))\r\n    };\r\n\r\n    const removeFromCart = (ProdID) => {\r\n        setCartItems((prevState) => ({...prevState, [ProdID] : Math.max(0, prevState[ProdID] - 1)}))\r\n    }\r\n\r\n    const updateCartItemCount = (newAmount, itemID) => {\r\n        setCartItems((prevState) => ({...prevState, [itemID]: newAmount }))\r\n    }\r\n\r\n    const contextValue = {\r\n        products,\r\n        cartItems,\r\n        addToCart,\r\n        removeFromCart,\r\n        updateCartItemCount,\r\n        getTotalCartAmount\r\n    };\r\n\r\n  return <ShopContext.Provider value={contextValue}>{props.children}</ShopContext.Provider>;\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}